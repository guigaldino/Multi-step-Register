<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <title>Multi-Step Register</title>

    <style>
        body {
            min-height: 100vh;
            background-color: #121826;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-content: space-between;
        }

        h2 {
            color: white;
            padding: 40px;
            margin-left: 15px;
            font-size: 30px;
        }

        label {
            color: #A1A1A9;
        }

        form {
            background-color: #212936;
            border-radius: 20px;
            width: 500px;
            height: auto;
            margin: auto;
            border: 1px solid #4D5562;
        }

        input {
            background-color: transparent !important;
            padding: 12px !important;
            border-radius: 10px !important;
            color: white !important;
        }

        input:focus {
            outline: none !important;
            box-shadow: none !important;
            border-color: #845EEE !important;
        }

        input::placeholder {
            color: #4D5562 !important;
        }

        .check-topic {
            background-color: #394150;
            color: #A1A1A9;
            border-radius: 20px;
            padding: 15px;
            text-align: left;
            border: 1px solid #A1A1A9;
        }

        .check-topic:hover {
            background-color: #505763;
            cursor: pointer;
        }

        span {
            color: white;
        }

        button {
            padding: 10px !important;
            border-radius: 25px !important;
            background: linear-gradient(to top, #652CD1, #845EEE);
            border: none !important;
            transition: 2s ease !important;
        }

        button:hover {
            background: linear-gradient(to top, #5619c7, #7049db) !important;
        }

        .btn-topics {
            background-color: #394150 !important;
            border-color: #A1A1A9 !important;
            padding: 15px !important;
            border-radius: 15px;
            text-align: left !important;

        }

        .checked {
            background-color: #652CD1 !important;
            border-color: #7049db !important;
            padding: 15px !important;
            border-radius: 15px;
            text-align: left !important;
        }

        .summary-content {
            font-size: 18px;
            margin-left: 60px;
        }

        .select {
            background-color: red;
        }

        .stepper {
            display: flex;
            justify-content: space-around;
            width: 300px;
            padding: 30px;
        }

        .step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #fff;
        }

        .completed {
            background-color: #5619c7;
        }

        .current {
            background-color: #a992de;
        }

        .container {
            display: flex;
            justify-content: center;
        }


        @media screen and (max-width: 640px) {

            body {
                overflow-x: hidden;
            }

            form {
                width: 80%;
            }
        }
    </style>

</head>

<body class="">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <form class="" id="form-container">

        <section id="register">
            <div class="row">
                <h2 class="title" id="register-title">Register</h2>
            </div>

            <div class="row mb-4 justify-content-center">
                <div id="name-container" class="col-10">
                    <label for="input-name" class="form-label">Name</label>
                    <input type="text" id="input-name" class="form-control" placeholder="enter your name here">
                    <span></span>
                </div>
            </div>

            <div class="row mb-4 justify-content-center">
                <div id="email-container" class="col-10">
                    <label for="input-email" class="form-label">Email</label>
                    <input type="email" id="input-email" class="form-control" placeholder="email@example.com">
                    <span></span>
                </div>
            </div>

            <div style="padding: 10px;" class="row justify-content-center mt-5">
                <button class="btn btn-primary col-3 " id="continueButtonRegister">Continue</button>
            </div>

        </section>

        <section class="d-none" id="topics">
            <div class="row">
                <h2 class="title" id="topics-title">Which topics you are interested in?</h2>
            </div>

            <div class="row justify-content-center">

                <input type="checkbox" class="btn-check" id="btn-check-software" autocomplete="off">
                <label style="margin-bottom: 20px;" class="btn btn-primary btn-topics col-10"
                    for="btn-check-software">Software Development</label>

                <input type="checkbox" class="btn-check" id="btn-check-user" autocomplete="off">
                <label style="margin-bottom: 20px;" class="btn btn-primary btn-topics col-10" for="btn-check-user">User
                    Experience</label>

                <input type="checkbox" class="btn-check" id="btn-check-graphic" autocomplete="off">
                <label style="margin-bottom: 20px;" class="btn btn-primary btn-topics col-10"
                    for="btn-check-graphic">Graphic Design</label>
            </div>

            <div style="padding: 10px;" class="row justify-content-center mt-3 mb-5">
                <button class="btn btn-primary col-4 " id="continueButtonTopics">Continue</button>
            </div>

        </section>

        <section class="d-none" id="summary">
            <div class="row">
                <h2 class="title" id="summary-title">Summary</h2>
            </div>

            <div class="row">
                <div class="summary-content" style="color: #A1A1A9;">Name: <span id="nameSpan"></span></div>
            </div>

            <div class="row">
                <div class="summary-content" style="color: #A1A1A9;">Email: <span id="emailSpan"></span></div>
            </div>

            <div style="margin-top: 30px;" class="summary-content" class="row">
                <p style="color: #A1A1A9;">Topics:</p>
                <ul id="listTopics"></ul>
            </div>

            <div style="margin-top: 30px; padding: 10px;" class="row justify-content-center">
                <button class="btn btn-primary col-3" id="confirmButton">Confirm</button>
            </div>

        </section>

        <section class="d-none" id="success">
            <div class="alert alert-success" role="alert">
                Success! Your data has been sent
            </div>

            <div style="margin-top: 30px; padding: 10px;" class="row justify-content-center">
                <button class="btn btn-primary col-3" id="finishProgram">Finish</button>
            </div>
        </section>
    </form>

    <div class="container">
        <div class="stepper">
            <div id="step1" class="step">1</div>
            <div id="step2" class="step">2</div>
            <div id="step3" class="step">3</div>
        </div>
    </div>


    <script>

        let nameInput = document.getElementById('input-name')
        let emailInput = document.getElementById('input-email')
        let sectionRegister = document.querySelector('#register')
        let sectionTopics = document.querySelector('#topics')
        let sectionSummary = document.querySelector('#summary')
        let sectionSuccess = document.querySelector('#success')
        let buttonContinueRegister = document.getElementById('continueButtonRegister')
        let buttonContinueTopics = document.getElementById('continueButtonTopics')
        let buttonConfirm = document.querySelector('#confirmButton')
        let buttonFinish = document.querySelector('#finishProgram')
        let btnTopics = document.querySelectorAll('.btn-topics')
        let spanName = document.querySelector('#nameSpan')
        let spanEmail = document.querySelector('#emailSpan')

        console.log(btnTopics)

        registerEvents()

        function registerEvents() {
            document.querySelector('#step1').classList.add('current')
            // event on buttonContinueRegister click
            buttonContinueRegister.addEventListener('click', function (e) {
                e.preventDefault()
                let inputIsValid = validadeInputsRegister()
                if (inputIsValid == true) {
                    sectionRegister.classList.toggle('d-none')
                    sectionTopics.classList.toggle('d-none')
                    document.querySelector('#step1').classList.remove('current')
                    document.querySelector('#step1').classList.add('completed')
                    document.querySelector('#step2').classList.add('current')
                } else {
                    let inputsRegister = document.querySelectorAll('#register input')
                    alertErrorRegister(inputsRegister)
                }
            })

            //event on topics section
            btnTopics.forEach((button) => {
                button.addEventListener('click', function () {
                    this.classList.toggle('checked')
                    let checkButton = this.control
                    checkButton.classList.toggle('btnInputChecked')
                })
            })

            buttonContinueTopics.addEventListener('click', function (e) {
                e.preventDefault()
                let buttonsCheckTopics = document.querySelectorAll('.btn-check')
                let hasBtnInputChecked = validateTopics(buttonsCheckTopics)

                if (hasBtnInputChecked == true) {
                    sectionTopics.classList.add('d-none')
                    sectionSummary.classList.remove('d-none')
                    sendInformations()
                    document.querySelector('#step2').classList.remove('current')
                    document.querySelector('#step2').classList.add('completed')
                    document.querySelector('#step3').classList.add('current')
                } else {
                    alert('Please, select at least one topic')
                }

            })

            // event on summary section
            buttonConfirm.addEventListener('click', function (e) {
                e.preventDefault()
                sectionSummary.classList.add('d-none')
                sectionSuccess.classList.remove('d-none')
                document.querySelector('#step3').classList.remove('current')
                document.querySelector('#step3').classList.add('completed')
            })

            // event on success section
            buttonFinish.addEventListener('click', function (e) {
                e.preventDefault()
                location.reload()
            })

        }


        function validadeInputsRegister() {
            let inputIsValid;
            document.querySelectorAll('#register input').forEach((input) => {
                if (input.value != '') {
                    inputIsValid = true
                } else {
                    inputIsValid = false
                }
            })
            return inputIsValid
        }

        function alertErrorRegister(arrayInputs) {
            for (let i = 0; i < arrayInputs.length; i++) {
                if (arrayInputs[i].value == '') {
                    let spanError = arrayInputs[i].parentElement.querySelector('span')
                    spanError.textContent = 'Required field not filed'
                    spanError.style.color = 'red'
                }
            }
        }

        function validateTopics(arrayTopics) {
            let hasClass = Array.from(arrayTopics).some(button => button.classList.contains('btnInputChecked'))
            if (hasClass) {
                return true
            } else {
                return false
            }
        }

        function sendInformations() {
            let summaryList = document.querySelector('#listTopics')
            spanName.textContent = nameInput.value
            spanEmail.textContent = emailInput.value

            let topicsChecked = document.querySelectorAll('.checked')
            for (let i = 0; i < topicsChecked.length; i++) {
                console.log(topicsChecked[i].innerHTML)
                let listItem = document.createElement('li')
                listItem.textContent = topicsChecked[i].innerHTML
                listItem.style.color = 'white'
                summaryList.append(listItem)
            }
        }

        // Atualiza o indicador de progresso para a etapa especificada
        function updateProgress(step) {
            let progressBar = document.getElementById('progressBar');
            let width = 0;
            if (step == 1) {
                width = 33;
            } else if (step == 2) {
                width = 66;
            } else if (step == 3) {
                width = 100;
            }
            progressBar.style.width = width + '%';
            progressBar.setAttribute('aria-valuenow', width);
        }

    </script>

</body>

</html>